// 获取 DOM 元素
const searchInput = document.getElementById("searchInput");
const backgroundOverlay = document.getElementById("backgroundOverlay");
const title = document.getElementById("title");
const clock = document.getElementById("clock");
const engineToggle = document.getElementById("engineToggle");
const engineMenu = document.getElementById("engineMenu");
const body = document.body;

// 当前搜索引擎，默认设置为 "bing"
let currentEngine = "bing";

// 搜索引擎列表，用于快捷键切换，顺序与 engineIcons 和 performSearch 保持一致
const engines = [
    "google",
    "bing",
    "duckduckgo",
    "baidu",
    "youtube",
    "bilibili",
    "wiki",
    "mdn",
    "music",
    "txsp"
];

// 搜索引擎图标映射，SVG 图标用于动态切换显示
const engineIcons = {
    google: '<svg t="1740551117706" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3334" width="200" height="200"><path d="M214.101333 512c0-32.512 5.546667-63.701333 15.36-92.928L57.173333 290.218667A491.861333 491.861333 0 0 0 4.693333 512c0 79.701333 18.858667 154.88 52.394667 221.610667l172.202667-129.066667A290.56 290.56 0 0 1 214.101333 512" fill="#FBBC05" p-id="3335"></path><path d="M516.693333 216.192c72.106667 0 137.258667 25.002667 188.458667 65.962667L854.101333 136.533333C763.349333 59.178667 646.997333 11.392 516.693333 11.392c-202.325333 0-376.234667 113.28-459.52 278.826667l172.373334 128.853333c39.68-118.016 152.832-202.88 287.146666-202.88" fill="#EA4335" p-id="3336"></path><path d="M516.693333 807.808c-134.357333 0-247.509333-84.864-287.232-202.88l-172.288 128.853333c83.242667 165.546667 257.152 278.826667 459.52 278.826667 124.842667 0 244.053333-43.392 333.568-124.757333l-163.584-123.818667c-46.122667 28.458667-104.234667 43.776-170.026666 43.776" fill="#34A853" p-id="3337"></path><path d="M1005.397333 512c0-29.568-4.693333-61.44-11.648-91.008H516.650667V614.4h274.602666c-13.696 65.962667-51.072 116.650667-104.533333 149.632l163.541333 123.818667c93.994667-85.418667 155.136-212.650667 155.136-375.850667" fill="#4285F4" p-id="3338"></path></svg>',
    bing: '<svg t="1740551025568" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2129" width="200" height="200"><path d="M153.813333 0L358.4 71.936V791.893333l288.128-166.186666-141.226667-66.346667-89.173333-221.866667 453.973333 159.488v231.893334L358.528 1024l-204.672-113.92V0z" fill="#00aeef" p-id="2130"></path></svg>',
    duckduckgo: '<svg t="1741164897112" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2916" width="200" height="200"><path d="M28.16 509.44c0 268.8 217.6 486.4 486.4 486.4s486.4-217.6 486.4-486.4-217.6-486.4-486.4-486.4-486.4 217.6-486.4 486.4z" fill="#CC6633" p-id="2917"></path><path d="M64 512c0 247.296 200.704 448 448 448s448-200.704 448-448-200.704-448-448-448S64 264.704 64 512z" fill="#FFFFFF" p-id="2918"></path><path d="M934.912 516.096c0 199.68-138.24 367.616-324.096 412.672-11.264-21.504-22.016-42.496-31.232-59.904 31.744 28.16 70.144 38.912 91.648 25.6 27.648-16.896 37.376-78.848-5.632-135.168-13.312 0.512-30.72 2.56-50.176 8.192-27.648 8.192-48.128 20.992-61.44 30.72-11.776-17.92-28.16-48.64-36.352-89.6-6.656-33.28-5.12-61.952-2.56-81.408 14.848 10.24 113.664 43.52 162.816 42.496s129.536-30.72 120.832-54.784-88.576 20.992-172.544 13.312c-61.952-5.632-72.704-33.28-58.88-53.76 17.408-25.6 48.64 4.608 100.352-10.752 51.712-15.36 124.416-43.008 151.04-58.368 61.952-34.816-26.112-49.152-46.592-39.424-19.968 9.216-88.064 26.624-120.32 34.304 17.92-62.976-25.088-172.544-73.216-220.672-15.872-15.872-39.424-25.6-66.56-30.72-10.24-14.336-27.136-28.16-51.2-40.448-46.08-24.064-98.304-32.768-149.504-24.064h-2.56c-6.144 1.024-9.728 3.584-14.848 4.096 6.144 0.512 29.184 11.264 44.032 17.408-7.168 3.072-16.896 4.608-24.576 7.68-3.072 0.512-5.632 1.024-8.704 2.56-7.168 3.072-12.8 15.36-12.288 21.504 34.816-3.584 86.528-1.024 124.416 10.24-26.624 3.584-51.2 10.752-69.12 19.968-0.512 0.512-1.024 0.512-2.048 1.024-2.048 1.024-4.608 1.536-6.144 2.56-56.832 29.696-81.92 99.84-67.072 183.808 13.312 75.776 69.12 336.384 95.232 460.288-164.352-56.32-282.624-214.016-282.624-399.36 0-235.008 190.464-424.96 424.96-424.96s424.96 190.464 424.96 424.96z" fill="#DE5833" p-id="2919"></path><path d="M357.376 446.976c0 17.408 14.336 31.744 31.744 31.744s31.744-14.336 31.744-31.744c0-17.408-14.336-31.744-31.744-31.744s-31.744 14.336-31.744 31.744zM599.552 401.408c-14.848-0.512-27.648 11.264-28.16 26.112-0.512 14.848 11.264 27.648 26.112 28.16h2.048c14.848 0 27.136-12.288 27.136-27.136s-12.288-27.136-27.136-27.136z m-201.728-45.568s-23.552-10.752-46.592 3.584c-23.04 14.848-22.016 29.696-22.016 29.696s-12.288-27.136 20.48-40.448c32.256-13.824 48.64 7.168 48.128 7.168z m218.112-2.048s-16.896-9.728-30.208-9.728c-27.136 0.512-34.816 12.288-34.816 12.288s4.608-28.672 39.424-23.04c11.264 2.56 20.992 9.728 25.6 20.48z" fill="#336699" p-id="2920"></path><path d="M549.376 522.24c24.576-9.728 35.328-9.728 74.24-17.408 24.576-5.12 56.832-11.776 94.72-23.552 30.208-9.216 36.864-13.824 56.32-15.36 26.112-2.048 62.464 1.024 66.56 15.36 2.048 6.656-4.608 13.824-10.24 20.48-14.336 16.384-32.256 22.016-61.44 30.72-36.352 11.264-38.912 11.264-51.2 15.36-58.368 18.432-55.296 23.552-76.8 25.6-38.912 3.584-60.928-12.8-71.68 0-6.656 8.192-4.608 22.016 0 30.72 6.656 11.776 19.968 15.36 40.96 20.48 25.6 6.144 46.08 5.632 51.2 5.12 18.432-1.024 31.744-4.608 51.2-10.24 40.96-11.776 52.736-21.504 71.68-15.36 3.584 1.024 19.456 6.144 20.48 15.36 2.048 18.432-53.76 43.52-102.4 51.2-47.104 7.168-86.528-2.56-97.28-5.12-7.168-2.048-19.968-6.144-46.08-15.36-29.696-10.24-37.376-13.824-46.08-20.48-9.216-7.168-23.04-17.92-25.6-35.84-2.56-18.432 9.216-33.28 15.36-40.96 9.216-11.264 21.504-20.992 46.08-30.72z" fill="#FDD20A" p-id="2921"></path><path d="M523.776 798.72c4.096-3.584 9.216-7.168 15.36-10.24 11.776-6.144 22.528-9.216 30.72-10.24-1.536 3.584-3.584 6.656-5.12 10.24 14.336-7.168 29.696-13.824 46.08-20.48 25.088-10.24 49.152-18.432 71.68-25.6 7.68 12.288 22.016 36.864 25.6 71.68 3.584 35.328-5.12 63.488-10.24 76.8-6.144 3.584-32.768 17.408-66.56 10.24s-51.712-30.208-56.32-35.84c-1.536 5.12-3.584 10.24-5.12 15.36-5.632 1.024-14.848 2.048-25.6 0-11.776-2.048-20.48-7.168-25.6-10.24-24.064 11.776-47.616 24.064-71.68 35.84-3.584 4.608-9.728 6.656-15.36 5.12-7.68-2.048-10.24-9.728-10.24-10.24-5.632-16.896-11.264-37.888-15.36-61.44-4.096-25.088-5.12-47.616-5.12-66.56-2.048-6.144 0.512-12.8 5.12-15.36s9.728-0.512 10.24 0c18.944 2.56 44.544 7.68 71.68 20.48 13.824 6.656 26.112 13.824 35.84 20.48z" fill="#66CC33" p-id="2922"></path></svg>',
    baidu: '<svg t="1740551845928" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8262" width="200" height="200"><path d="M184.000902 539.721859c111.34883-23.965596 95.990371-157.168234 92.822689-186.253316-5.471451-44.795506-58.266155-123.21964-129.874972-116.884275-90.006971 7.935204-103.157652 138.226134-103.157652 138.226134-12.254771 60.153966 29.085082 188.81306 140.177939 164.87946z m206.699266-223.593571c61.433837 0 111.092856-70.808897 111.092856-158.288121 0-87.03127-49.499035-157.840167-110.932872-157.840167S279.479325 70.424935 279.479325 157.90416c0 87.447228 49.914993 158.288122 111.34883 158.288122z m264.933424 10.494948c82.327741 11.102886 134.898468-76.792297 145.553399-143.345621 10.654931-66.137366-42.651721-143.345621-100.693899-156.560295-58.458136-13.470649-130.546905 79.959979-137.810176 140.785877-7.67923 74.648512 10.654931 148.881065 92.566714 159.440007z m325.663332 112.14875c0-31.836806-26.141378-127.69919-124.147547-127.69919-97.910178 0-111.34883 90.454926-111.34883 154.448506 0 61.017879 5.023496 145.905364 127.347225 143.345621 121.811781-2.975701 108.501116-138.226134 108.501116-170.222924zM857.565335 717.624013s-127.347225-98.550114-201.611775-204.779458c-100.693899-156.880263-243.815542-93.014669-291.554754-13.470648-47.771208 80.34394-122.003761 130.642895-132.466712 144.081546-10.654931 13.214674-153.584594 90.454926-121.747787 231.240804 31.99679 140.785877 143.345621 138.226134 143.345621 138.226134s81.911783 8.095188 177.486196-13.214674 177.486196 5.119486 177.486196 5.119486 222.153715 74.648512 283.619549-68.697109c60.761905-143.761579-34.556534-217.994132-34.556534-217.994132z" fill="#2319DC" p-id="8263"></path></svg>',
    youtube: '<svg t="1740551562085" class="icon" viewBox="0 0 1152 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3810" width="200" height="200"><path d="M1099.31 248.166c-12.562-47.3-49.574-84.552-96.568-97.194C917.562 128 576 128 576 128s-341.56 0-426.742 22.972c-46.994 12.644-84.006 49.894-96.568 97.194-22.824 85.734-22.824 264.61-22.824 264.61s0 178.876 22.824 264.61c12.562 47.3 49.574 83 96.568 95.642C234.44 896 576 896 576 896s341.56 0 426.742-22.972c46.994-12.642 84.006-48.342 96.568-95.642 22.824-85.734 22.824-264.61 22.824-264.61s0-178.876-22.824-264.61zM464.29 675.182V350.37l285.478 162.41L464.29 675.182z" p-id="3811" fill="#ff0033"></path></svg>',
    bilibili: '<svg t="1740551539290" class="icon" viewBox="0 0 1129 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2733" width="200" height="200"><path d="M234.909 9.656a80.468 80.468 0 0 1 68.398 0 167.374 167.374 0 0 1 41.843 30.578l160.937 140.82h115.07l160.936-140.82a168.983 168.983 0 0 1 41.843-30.578A80.468 80.468 0 0 1 930.96 76.445a80.468 80.468 0 0 1-17.703 53.914 449.818 449.818 0 0 1-35.406 32.187 232.553 232.553 0 0 1-22.531 18.508h100.585a170.593 170.593 0 0 1 118.289 53.109 171.397 171.397 0 0 1 53.914 118.288v462.693a325.897 325.897 0 0 1-4.024 70.007 178.64 178.64 0 0 1-80.468 112.656 173.007 173.007 0 0 1-92.539 25.75h-738.7a341.186 341.186 0 0 1-72.421-4.024A177.835 177.835 0 0 1 28.91 939.065a172.202 172.202 0 0 1-27.36-92.539V388.662a360.498 360.498 0 0 1 0-66.789A177.03 177.03 0 0 1 162.487 178.64h105.414c-16.899-12.07-31.383-26.555-46.672-39.43a80.468 80.468 0 0 1-25.75-65.984 80.468 80.468 0 0 1 39.43-63.57M216.4 321.873a80.468 80.468 0 0 0-63.57 57.937 108.632 108.632 0 0 0 0 30.578v380.615a80.468 80.468 0 0 0 55.523 80.469 106.218 106.218 0 0 0 34.601 5.632h654.208a80.468 80.468 0 0 0 76.444-47.476 112.656 112.656 0 0 0 8.047-53.109v-354.06a135.187 135.187 0 0 0 0-38.625 80.468 80.468 0 0 0-52.304-54.719 129.554 129.554 0 0 0-49.89-7.242H254.22a268.764 268.764 0 0 0-37.82 0z m0 0" fill="#20B0E3" p-id="2734"></path><path d="M348.369 447.404a80.468 80.468 0 0 1 55.523 18.507 80.468 80.468 0 0 1 28.164 59.547v80.468a80.468 80.468 0 0 1-16.094 51.5 80.468 80.468 0 0 1-131.968-9.656 104.609 104.609 0 0 1-10.46-54.719v-80.468a80.468 80.468 0 0 1 70.007-67.593z m416.02 0a80.468 80.468 0 0 1 86.102 75.64v80.468a94.148 94.148 0 0 1-12.07 53.11 80.468 80.468 0 0 1-132.773 0 95.757 95.757 0 0 1-12.875-57.133V519.02a80.468 80.468 0 0 1 70.007-70.812z m0 0" fill="#20B0E3" p-id="2735"></path></svg>',
    wiki: '<svg t="1740558225280" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3393" width="200" height="200"><path d="M530.077727 610.234325c-49.762357 97.384981-104.639199 199.047382-151.85864 295.595298-0.433882 0.433882-22.974247 0-22.974247-0.433882-71.867818-168.012551-147.146315-334.722434-219.044832-503.168868C118.774127 361.393887 60.486606 295.04476 20.521383 295.478641c0-4.681626-0.433882-15.315824-0.433882-21.703301l247.972675 0 0 21.269419c-29.360701 1.704828-80.827887 20.400632-66.349127 52.30425 33.608445 76.146261 158.6493 367.927697 192.257745 441.935248 22.974247-45.514613 88.455611-167.143765 115.27442-218.61095-21.269419-43.405579-89.757257-205.031677-111.460558-244.995877-14.881942-27.221991-55.281047-29.795607-85.478813-30.197766 0-6.821359 0-12.340049 0-21.269419l218.177068 0.403183 0 19.99745c-29.763884 0.867764-58.256822 11.905144-45.079708 39.995923 28.92682 61.23362 46.785559 104.205317 73.604368 160.354128 8.495488-16.587793 53.141314-106.34505 73.573669-154.401556 13.610996-31.469736-5.952572-43.808762-59.125609-45.080731 0.433882-5.54939 0-15.749706 0.433882-20.866237 68.053955-0.403183 170.120562-0.403183 188.413184-0.837064l0 20.834514c-34.44551 1.270946-70.162989 19.563568-88.889493 48.490388l-90.594321 188.010001c9.766434 24.679076 96.981798 218.61095 105.910145 239.880369l187.576119-432.571996c-13.177114-35.282574-55.714929-42.940998-72.301699-43.37488 0-5.51869 0-14.044878 0-21.269419l195.636702 1.704828 0.433882 0.837064-0.433882 18.726503c-42.940998 1.270946-68.892043 24.245194-85.478813 61.667501-38.290071 88.48631-158.246117 367.493815-237.772358 549.117362l-20.834514 0L530.077727 610.234325z" fill="#fefefe" p-id="3394"></path></svg>',
    mdn: '<svg t="1740558657565" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5728" width="200" height="200"><path d="M393.155 131.134L167.583 857.539h-92.28l224.784-726.405h93.068z m82.026 0v726.405h-82.026V131.134h82.026z m317.852 0L568.25 857.539h-92.28l224.783-726.405h92.28z m82.026 0v726.405h-82.026V131.134h82.026z" fill="#0069C2" p-id="5729"></path></svg>',
    music: '<svg t="1740553942111" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2404" width="200" height="200"><path d="M627.086668 5.114963c28.132297-7.672445 58.822075-7.672445 86.954372 0 33.24726 7.672445 63.937038 23.017334 89.511853 43.477186 10.229926 7.672445 17.902371 15.344889 23.017334 28.132297 7.672445 17.902371 5.114963 38.362223-5.114963 53.707112-7.672445 12.787408-23.017334 23.017334-40.919704 25.574815-12.787408 2.557482-25.574815 0-38.362223-7.672445-5.114963-2.557482-10.229926-10.229926-17.902371-12.787407-17.902371-10.229926-35.804741-20.459852-56.264593-17.902371-15.344889 0-28.132297 7.672445-35.804742 17.902371-10.229926 10.229926-12.787408 23.017334-10.229926 35.804741 7.672445 25.574815 12.787408 53.707112 20.459853 79.281927 51.14963 2.557482 99.741779 15.344889 143.218965 40.919704 40.919704 25.574815 79.281927 58.822075 109.971705 97.184298 25.574815 33.24726 46.034667 71.609483 56.264593 112.529187 12.787408 43.477186 17.902371 89.511853 12.787408 132.989039-2.557482 38.362223-10.229926 74.166964-23.017334 109.971705-33.24726 84.39689-92.069335 161.121336-171.351261 209.713485-56.264593 35.804741-122.759113 58.822075-189.253633 66.49452-46.034667 5.114963-92.069335 5.114963-138.104002-2.557482-94.626816-15.344889-181.581188-61.379556-250.633189-130.431558-66.49452-66.49452-112.529187-153.448891-132.989039-245.518225-7.672445-69.052001-7.672445-138.104002 7.672445-207.156004 17.902371-81.839409 61.379556-161.121336 117.644149-222.500892 48.592149-51.14963 107.414224-89.511853 171.351262-117.64415 7.672445-2.557482 12.787408-5.114963 20.459852-7.672444 15.344889-2.557482 30.689778 0 43.477186 10.229926 17.902371 12.787408 25.574815 33.24726 23.017334 53.707112-2.557482 20.459852-17.902371 38.362223-35.804741 46.034667-63.937038 25.574815-122.759113 69.052001-163.678818 122.759113C205.102218 373.392302 179.527402 432.214377 171.854958 493.593933c-7.672445 61.379556 0 122.759113 20.459852 181.581188 30.689778 84.39689 94.626816 156.006373 173.908743 196.926077 48.592149 25.574815 102.299261 38.362223 156.006373 38.362223 43.477186 0 89.511853-7.672445 130.431558-23.017334 35.804741-12.787408 71.609483-33.24726 99.741779-58.822074 28.132297-23.017334 51.14963-53.707112 66.494519-84.396891 7.672445-15.344889 17.902371-33.24726 20.459853-51.14963 15.344889-51.14963 17.902371-107.414224 2.557481-158.563854-12.787408-43.477186-38.362223-81.839409-71.609482-109.971706-15.344889-12.787408-30.689778-25.574815-48.592149-35.804741-15.344889-7.672445-30.689778-15.344889-48.592149-17.902371 12.787408 46.034667 23.017334 92.069335 35.804741 135.546521 2.557482 10.229926 5.114963 23.017334 5.114963 33.24726 2.557482 46.034667-15.344889 94.626816-46.034667 130.431557-28.132297 33.24726-69.052001 58.822075-112.529187 66.49452-46.034667 10.229926-97.184298 0-138.104002-25.574815-38.362223-25.574815-66.49452-63.937038-81.839409-104.856743-7.672445-23.017334-12.787408-48.592149-12.787407-74.166964-2.557482-56.264593 12.787408-109.971705 43.477185-156.006373 35.804741-53.707112 94.626816-92.069335 158.563855-109.971705-5.114963-17.902371-10.229926-35.804741-12.787408-53.707112-12.787408-38.362223-10.229926-81.839409 7.672445-115.086668 10.229926-20.459852 23.017334-38.362223 40.919704-51.149631C583.609483 25.574815 604.069335 12.787408 627.086668 5.114963m-148.333928 414.312006c-17.902371 17.902371-28.132297 40.919704-33.24726 63.937038-5.114963 20.459852-5.114963 43.477186 0 66.49452 5.114963 23.017334 17.902371 46.034667 38.362223 61.379556 15.344889 10.229926 35.804741 15.344889 56.264594 10.229926 35.804741-5.114963 63.937038-38.362223 63.937038-74.166964-2.557482-7.672445-2.557482-17.902371-5.114963-25.574815-12.787408-48.592149-25.574815-99.741779-38.362223-148.333928-30.689778 7.672445-58.822075 23.017334-81.839409 46.034667z" fill="#ff314a" p-id="2405"></path></svg>',
    txsp: '<svg t="1741165055002" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5064" width="200" height="200"><path d="M331.98 129.66c25.92-4.06 52.22 1.46 76.9 9.3 54.1 17.16 106.4 39.58 157.3 64.6 85.94 41.76 167.56 91.92 246.24 146.02 33.96 24.1 68.24 48.62 96.18 79.8 15.92 18.22 29.24 41.48 26.58 66.54-3.78 29.86-24.52 53.72-44.84 74.42-85.64 80.76-179.3 153.4-280.7 213.4-52.5 30.34-107 57.7-164.48 77.34-36.92 12.74-75.8 23.58-115.24 19.82-23.04-2.14-46.08-11.56-61.82-28.94-13.54-15.04-21.76-34.34-25.5-54.08l1.14-1.6c17.18-4.22 34.2-9.14 51.42-13.26 72.42-18.04 142.08-45.84 208.96-78.78 71.12-35.22 140.18-75.04 204.4-121.76 20.98-15.92 44.22-31.48 56-55.92 9.12-17.38 6.6-39.28-3.68-55.58-12.24-19.82-30.06-35.54-48.88-48.96-21.84-16.04-45.06-30.08-68.6-43.48-45.44-26.92-92.9-50.14-140.12-73.7-55.2-26.12-111.76-49.58-170.06-67.86-25.96-7.58-51.8-15.56-77.88-22.62 2.88-11.6 6.28-23.1 10.96-34.1 11.44-26.56 37.1-46.38 65.72-50.6z" fill="#10ABF2" p-id="5065"></path><path d="M171.4 219.38c24.4-11.76 52.52-8.36 78.24-3.62-7.76 34.16-12.16 68.96-17.54 103.52-0.74 14.92-2.28 29.76-4.04 44.6-2.8 18.52-2.1 37.38-5.12 55.92-0.52 21.72-1.54 43.46-2.4 65.18-2.3 20.94-0.98 42-1.3 63.02 0.24 31.44-0.74 62.96 1.56 94.36 1.48 47.88 5.28 95.74 11.48 143.26 0.1 1.78 0.32 5.32 0.42 7.1-24.58 4.44-52.74 7.94-74.58-6.98-21.04-15.56-29.2-42.16-34.84-66.54-14.06-78.18-19.44-157.8-19.76-237.16 1.1-41.4 5.2-82.66 11.24-123.6 5.34-33.44 11.28-67.06 23.16-98.9 6.24-16.54 16.88-32.62 33.48-40.16z" fill="#FF8F21" p-id="5066"></path><path d="M250.06 213.66c1.32 0.18 3.94 0.52 5.24 0.7 26.08 7.06 51.92 15.04 77.88 22.62 58.3 18.28 114.86 41.74 170.06 67.86 47.22 23.56 94.68 46.78 140.12 73.7 23.54 13.4 46.76 27.44 68.6 43.48 18.82 13.42 36.64 29.14 48.88 48.96 10.28 16.3 12.8 38.2 3.68 55.58-11.78 24.44-35.02 40-56 55.92-64.22 46.72-133.28 86.54-204.4 121.76-66.88 32.94-136.54 60.74-208.96 78.78-17.22 4.12-34.24 9.04-51.42 13.26-3.26 0.68-6.56 1.14-9.84 1.76-0.5-4.16-1.06-8.28-1.62-12.42-6.2-47.52-10-95.38-11.48-143.26-2.3-31.4-1.32-62.92-1.56-94.36 0.32-21.02-1-42.08 1.3-63.02 0.86-21.72 1.88-43.46 2.4-65.18 3.02-18.54 2.32-37.4 5.12-55.92 1.76-14.84 3.3-29.68 4.04-44.6 5.38-34.56 9.78-69.36 17.54-103.52l0.42-2.1m98.46 124.68c-10 2.14-13.74 12.8-14.3 21.88-0.7 13.9-0.58 27.9 0.74 41.76 0.58 41.34-0.62 82.7 0.76 124.02-0.02 36.68-0.06 73.34 0.12 110-0.2 8.68 2.26 19.2 10.74 23.36 9.34 3.38 19.16-0.74 27.1-5.66 66.6-44.84 133.54-89.2 200.26-133.88 8.38-5.96 17.34-14.6 16.36-25.82-0.32-10.96-9.64-18.72-18.24-24.1-67.88-42.12-135.76-84.18-203.64-126.3-5.96-3.36-12.86-6.86-19.9-5.26z" fill="#7DE621" p-id="5067"></path><path d="M348.52 338.34c7.04-1.6 13.94 1.9 19.9 5.26 67.88 42.12 135.76 84.18 203.64 126.3 8.6 5.38 17.92 13.14 18.24 24.1 0.98 11.22-7.98 19.86-16.36 25.82-66.72 44.68-133.66 89.04-200.26 133.88-7.94 4.92-17.76 9.04-27.1 5.66-8.48-4.16-10.94-14.68-10.74-23.36-0.18-36.66-0.14-73.32-0.12-110-1.38-41.32-0.18-82.68-0.76-124.02-1.32-13.86-1.44-27.86-0.74-41.76 0.56-9.08 4.3-19.74 14.3-21.88z" fill="#FFFFFF" p-id="5068"></path></svg>'
};

/**
 * 更新背景图片，根据时间切换早晚背景
 */
function updateBackground() {
    const hour = new Date().getHours();
    const isMorning = hour >= 6 && hour < 18;
    body.style.background = isMorning
        ? 'url("/img/bgxzs.png") no-repeat center/cover fixed'
        : 'url("/img/bgxws.png") no-repeat center/cover fixed';
    backgroundOverlay.style.background = isMorning
        ? 'url("/img/bgxws.png") no-repeat center/cover'
        : 'url("/img/bgxzs.png") no-repeat center/cover';
}

/**
 * 更新搜索引擎图标，显示当前选中的引擎图标
 */
function updateEngineIcon() {
    engineToggle.innerHTML = engineIcons[currentEngine];
}

/**
 * 执行搜索，打开新窗口跳转到当前搜索引擎的搜索结果页
 */
function performSearch() {
    const query = searchInput.value;
    if (!query) return; // 输入为空时不执行
    const engines = {
        google: `https://www.google.com/search?q=${query}`,
        bing: `https://www.bing.com/search?q=${query}`,
        duckduckgo: `https://duckduckgo.com/?t=h_&q=${query}`,
        baidu: `https://www.baidu.com/s?wd=${query}`,
        youtube: `https://www.youtube.com/results?search_query=${query}`,
        bilibili: `https://search.bilibili.com/all?keyword=${query}`,
        wiki: `https://zh.wikipedia.org/w/index.php?search=${query}`,
        mdn: `https://developer.mozilla.org/zh-CN/search?q=${query}`,
        music: `https://music.163.com/#/search/m/?s=${query}`,
        txsp: `https://v.qq.com/x/search/?q=${query}`
    };
    window.open(engines[currentEngine]);
}

/**
 * 更新时钟显示，格式为 HH:MM:SS
 */
function updateClock() {
    clock.textContent = new Date().toTimeString().slice(0, 8);
}

// 输入框聚焦时显示背景叠加层
searchInput.addEventListener("focus", () => {
    backgroundOverlay.style.opacity = "1";
});

// 输入框失焦时隐藏背景叠加层
searchInput.addEventListener("blur", () => {
    backgroundOverlay.style.opacity = "0";
});

// 按下 Enter 键执行搜索（仅在聚焦时生效）
searchInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") performSearch();
});

// 点击切换按钮显示/隐藏搜索引擎菜单
engineToggle.addEventListener("click", () => {
    engineMenu.style.display = engineMenu.style.display === "block" ? "none" : "block";
});

// 点击菜单选项切换搜索引擎
engineMenu.addEventListener("click", (e) => {
    if (e.target.classList.contains("engine-option")) {
        currentEngine = e.target.getAttribute("data-engine");
        updateEngineIcon();
        engineMenu.style.display = "none";
    }
});

// 点击页面其他区域隐藏菜单
document.addEventListener("click", (e) => {
    if (!engineToggle.contains(e.target) && !engineMenu.contains(e.target)) {
        engineMenu.style.display = "none";
    }
});

// 添加 Alt + 1 到 Alt + 0 快捷键切换搜索引擎，以及 Enter 未聚焦时触发搜索
document.addEventListener("keydown", (e) => {
    // Alt + 0 到 Alt + 9 切换搜索引擎
    if (e.altKey && (e.key >= "0" && e.key <= "9")) {
        const index = e.key === "0" ? 9 : parseInt(e.key) - 1; // "0"映射到索引9，其他减1
        if (index < engines.length) {
            currentEngine = engines[index];
            updateEngineIcon();
        }
    }
    // Enter 未聚焦时聚焦输入框并触发搜索
    if (e.key === "Enter" && document.activeElement !== searchInput) {
        e.preventDefault(); // 防止触发浏览器默认行为
        searchInput.focus(); // 聚焦输入框
        performSearch(); // 直接执行搜索
    }
});

// 初始加载时隐藏标题，显示时钟
setTimeout(() => {
    title.style.display = "none";
    clock.style.display = "block";
}, 600);

// 获取一言并显示
fetch("https://v1.hitokoto.cn")
    .then((res) => res.json())
    .then((data) => {
        document.getElementById("quote").textContent = `${data.hitokoto} —— ${data.from}`;
    });

// 初始化背景和图标
updateBackground();
updateEngineIcon();

// 每秒更新时钟和背景
setInterval(() => {
    updateClock();
    updateBackground();
}, 1000);